# Kafka Producer-Consumer Application

## Описание
Это приложение демонстрирует работу с Apache Kafka: один продюсер отправляет JSON-сообщения в топик my_topic, два типа консьюмеров (SingleMessageConsumer и BatchMessageConsumer) читают эти сообщения параллельно из разных consumer groups.

- Producer: Отправляет 100 сообщений (JSON-сериализованных объектов Message) с гарантией At Least Once (acks=1, retries=5).
- SingleMessageConsumer: Читает по 1 сообщению за poll, автокоммит, десериализует и выводит на консоль. Группа: "single-group".
- BatchMessageConsumer: Читает пачками минимум по 10 сообщений (настроено через fetch.min.bytes=10240 и fetch.max.wait.ms=5000), обрабатывает в цикле, коммитит вручную после пачки. Группа: "batch-group".
- Консьюмеры работают параллельно, получают все сообщения независимо. Ошибки логируются в консоль через SLF4J.
- Сериализация: JSON с Jackson. Обработка ошибок десериализации с выводом на консоль.

Приложение запускается в потоках в KafkaApp. Docker-compose запускает Kafka и 2 экземпляра приложения для демонстрации масштабирования.

## Инструкция по запуску
1. Установите Maven и JDK 24.
2. Соберите JAR: mvn clean package.
3. Запустите Docker-compose: docker-compose up.
    - Это запустит Kafka(Kraft) и 2 экземпляра приложения.
4. Создайте топик (см. topic.txt).
5. Приложение автоматически начнет отправлять/читать сообщения.

## Проверка
1. Проверьте логи контейнеров: docker logs <app-container>.
    - Увидите "Producing: ..." от продюсеров.
    - "Single Consumer consumed: ..." и "Batch Consumer consumed: ..." от консьюмеров (каждый получит все сообщения).
2. Для batch: Если сообщений <10, poll подождет до 5 сек или до накопления.
3. Остановите/запустите Kafka, чтобы увидеть retries в продюсере.
4. Проверьте offsets: kafka-consumer-groups.sh --bootstrap-server localhost:9092 --describe --group single-group (и для batch-group).
5. Масштабирование: С replicas=2 увидите два набора логов (два продюсера отправляют в один топик).

## Принцип работы
- Продюсер: Асинхронно отправляет сериализованные сообщения (push).
- Консьюмеры: В отдельных потоках, poll() для чтения. Single - по одному с автокоммитом. Batch - пачками с ручным commitSync().
- Параллелизм: Разные группы обеспечивают независимое чтение. Docker replicas=2 дублирует приложение для нагрузки.